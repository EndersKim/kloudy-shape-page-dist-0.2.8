(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74108119"],{1980:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment",style:{height:t.el_height},attrs:{level:t.level}},[t.level<=2?n("div",{staticClass:"comment_avatar_section"},[n("Avatar",{staticClass:"big_avatar",attrs:{avatar_url:t.comment.character.avatar_url,nickname:t.comment.character.nickname,size:40},nativeOn:{click:function(e){return t.view_user_event(t.comment.character)}}}),n("Avatar",{staticClass:"small_avatar",attrs:{avatar_url:t.comment.character.avatar_url,nickname:t.comment.character.nickname,size:30},nativeOn:{click:function(e){return t.view_user_event(t.comment.character)}}})],1):t._e(),n("div",{ref:"comment_main_section",staticClass:"comment_main_section"},[n("div",{ref:"comment_text_box",staticClass:"comment_text_box transition_fast",attrs:{level:t.level}},[n("div",{staticClass:"comment_text_top"},[n("div",{staticClass:"comment_name"},[n("span",{staticClass:"comment_name_span with_underline",on:{click:function(e){return t.view_user_event(t.comment.character)}}},[t._v(t._s(t.comment.character.nickname))]),t.level>2||t.comment.parent?n("span",{staticClass:"comment_name_reply"},[t._v(" 回复 ")]):t._e(),t.level>2?n("span",{ref:"comment_reply_name",staticClass:"comment_name_span_parent",on:{mouseenter:function(e){return t.hightlight_parent_enter()},mouseleave:function(e){return t.hightlight_parent_leave()},click:function(e){return t.go_to_parent()}}},[t._v(t._s(t.$parent.comment.character.nickname))]):t._e(),t.comment.parent?n("span",{staticClass:"comment_name_span_parent with_underline",on:{click:function(e){return t.view_user_event(t.comment.parent.character)}}},[t._v(t._s(t.comment.parent.character.nickname))]):t._e()]),n("span",{staticClass:"comment_time"},[t._v(t._s(t.comment.insert_time))])]),t.comment.parent?n("div",{staticClass:"comment_parent"},[n("p",{staticClass:"comment_parent_content comment_text_content",domProps:{innerHTML:t._s(t.display_content(t.comment.parent.content))}})]):t._e(),n("div",{staticClass:"comment_text"},[n("p",{staticClass:"comment_text_content",domProps:{innerHTML:t._s(t.display_content(t.comment.content))}})]),n("div",{staticClass:"comment_action"},[n("p",[t._v(t._s(t.display_relative_time))]),t.ip_info&&!t.options.hide_ip?n("p",{staticClass:"comment_action_ip"},[t._v("IP属地"),"中国"!=t.ip_info.country?n("span",[t._v(t._s(t.ip_info.country))]):n("span",[t._v(t._s(t.ip_info.province))])]):t._e(),t.comment.children?n("p",{staticClass:"reply_count",on:{mouseenter:function(e){return t.hightlight_children_enter()},mouseleave:function(e){return t.hightlight_children_leave()},click:function(e){return t.go_to_children()}}},[t._v(t._s(t.comment.children.length)+"条回复")]):t._e(),t.options.hide_action?t._e():[n("p",{staticClass:"comment_action_transition transition_fast"},[n("a",{on:{click:function(e){return t.reply_comment_event(t.comment)}}},[t._v("回复")])]),t.self?n("p",{staticClass:"comment_action_transition transition_fast"},[n("a",{on:{click:function(e){return t.delete_comment_event(t.comment,t.level)}}},[t._v("删除")])]):t.$Account.login_info&&"admin"==t.$Account.login_info.user.utype?n("p",{staticClass:"comment_action_transition transition_fast"},[n("a",{on:{click:function(e){return t.delete_comment_event(t.comment,t.level)}}},[t._v("删除他人评论")])]):t._e(),n("p",{staticClass:"comment_action_transition transition_fast comment_action_archor"},[n("a",{attrs:{href:"#comment_"+t.comment.comment_no},on:{click:function(e){return t.comment_action_archor()}}},[t._v("#")])])],t.options.display_post&&t.comment.post?[n("p",[n("router-link",{attrs:{to:"/"+t.comment.post.post_link+"#comment_"+t.comment.comment_no}},[t._v("发布在 "+t._s(t.comment.post.post_link))])],1)]:t._e()],2)]),t.comment.children?n("div",{ref:"comment_reply_box",staticClass:"comment_reply_box transition_fast",attrs:{level:t.level}},t._l(t.comment.children,(function(e){return n("Comment",{key:e.comment_no,attrs:{comment:e,level:t.level+1,options:t.options},on:{reply_comment_event:t.reply_comment_event,delete_comment_event:t.delete_comment_event,view_user_event:t.view_user_event,refresh_event:function(e){return t.$emit("refresh_event")},loaded:t.comment_loaded,archor_event:t.archor_event}})})),1):t._e()])])},c=[],o=(n("d3b7"),n("3ca3"),n("ddb0"),n("ac1f"),n("5319"),n("5b81"),n("30ff"),{name:"Comment",components:{Avatar:function(){return n.e("chunk-5685979e").then(n.bind(null,"0f0e"))},Popper:function(){return n.e("chunk-35669aaa").then(n.bind(null,"ba37"))}},props:{comment:{},level:{default:1},options:{default:function(){return{}}}},data:function(){return{el_height:"auto",timer:null,ip_info:null}},computed:{self:function(){return!!this.$Account.active_character&&this.$Account.active_character.cid==this.comment.character.cid},display_relative_time:function(){return this.$App.relative_time(this.comment.insert_time)}},mounted:function(){var t=this;this.compute_el_height(),this.comment.ip&&!this.options.hide_ip&&this.$axios.get("https://ip.useragentinfo.com/json",{params:{ip:this.comment.ip}}).then((function(e){var n=e.data;t.ip_info=n})),this.$emit("loaded",this)},beforeDestroy:function(){},watch:{},methods:{replace_link:function(t){return t.replace(/(https?:\/\/)(([0-9a-z.]+\.[a-z]+)|(([0-9]{1,3}\.){3}[0-9]{1,3}))(:[0-9]+)?(\/[0-9a-z%/.\-_]*)?(\?[0-9a-z=&%_\-]*)?(\#[0-9a-z=&%_\-]*)?/gi,(function(t,e){return'<a href="'+t+'" target="_blank" rel="noopener">'+t+"</a>"}))},display_content:function(t){var e=t.replaceAll("&","&amp;").replaceAll(" ","&nbsp;").replaceAll('\\"',"&quot;").replaceAll("\\'","'").replaceAll("\\\\","\\").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("\r\n","<br />");return e},compute_el_height:function(){var t=this;this.$refs.comment_main_section&&(this.el_height=getComputedStyle(this.$refs.comment_main_section).height),clearTimeout(this.timer),this.timer=setTimeout((function(){t.el_height="auto"}),500)},reply_comment_event:function(t){this.$emit("reply_comment_event",t)},delete_comment_event:function(t,e){this.$refs.comment_main_section&&1==e&&(this.el_height=getComputedStyle(this.$refs.comment_main_section).height),this.$emit("delete_comment_event",t,e)},view_user_event:function(t){this.$emit("view_user_event",t)},comment_loaded:function(t){this.$emit("loaded",t)},archor_event:function(t){this.$emit("archor_event",t)},comment_action_archor:function(){this.$emit("archor_event",this)},hightlight_parent_enter:function(){this.level>2&&(this.$parent.$refs.comment_text_box.classList.add("hightlight"),this.$refs.comment_reply_name.classList.add("hightlight"))},hightlight_parent_leave:function(){this.level>2&&(this.$parent.$refs.comment_text_box.classList.remove("hightlight"),this.$refs.comment_reply_name.classList.remove("hightlight"))},go_to_parent:function(){this.$App.scroll_to(this.$parent.$el)},hightlight_children_enter:function(){this.$refs.comment_reply_box.classList.add("reply_box_hightlight")},hightlight_children_leave:function(){this.$refs.comment_reply_box.classList.remove("reply_box_hightlight")},go_to_children:function(){this.$App.scroll_to(this.$refs.comment_reply_box)}}}),a=o,r=(n("cf13"),n("2877")),s=Object(r["a"])(a,i,c,!1,null,null,null);e["default"]=s.exports},"30ff":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("2f76");function c(t){var e=n("d4cd")({linkify:!0,breaks:!0}).use(n("cf2b")).use(n("54f6")).use(n("7ba6")).use(n("4bb9")).use(n("362d")).use(n("be03")).use(n("65ab")).use(i["a"],{attrs:{target:"_blank",rel:"noopener"}});return e.render(t)}},afbb:function(t,e,n){},cf13:function(t,e,n){"use strict";n("afbb")}}]);