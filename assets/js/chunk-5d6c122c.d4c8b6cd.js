(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d6c122c"],{"133a":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"link_class"},[t.editing?e("div",{staticClass:"link_class_top_row"},[e("p",[e("b",[t._v("Class ID: ")]),t._v(t._s(t.class_id)+" ")]),e("ButtonI",{nativeOn:{click:function(i){return t.get_links()}}},[t._v(t._s(t.$Text("刷新")))])],1):t._e(),e("div",{staticClass:"link_item_container"},[t._l(t.links,(function(i){return e("LinkItem",{key:i.link_no,attrs:{link_content:i,editing:t.editing},on:{edit_event:t.edit_event}})})),t.editing?e("div",{staticClass:"add_new_link"},[e("ButtonI",{attrs:{type:"plain"},nativeOn:{click:function(i){return t.new_link_action()}}},[t._v(t._s(t.$Text("添加")))])],1):t._e()],2),e("Dialog",{attrs:{open:t.open_edit_dialog,title:t.$Text("编辑")},on:{close:function(i){t.open_edit_dialog=!1}}},[e("div",{staticClass:"edit_link_dialog"},[e("div",{staticStyle:{height:"20px"}}),e("LinkItem",{attrs:{link_content:t.editing_link}}),e("div",{staticStyle:{height:"20px"}}),e("table",{staticClass:"form_table"},[e("tr",[e("td",[e("div",{staticClass:"form_table_lable"},[e("i",{staticClass:"el-icon-info form_table_icon"}),e("h4",[t._v(t._s(t.$Text("Link No")))])])]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_info.link_no,expression:"edit_info.link_no"}],staticClass:"input",attrs:{disabled:""},domProps:{value:t.edit_info.link_no},on:{input:function(i){i.target.composing||t.$set(t.edit_info,"link_no",i.target.value)}}})])]),e("tr",[e("td",[e("div",{staticClass:"form_table_lable"},[e("i",{staticClass:"el-icon-guide form_table_icon"}),e("h4",[t._v(t._s(t.$Text("Link URL")))])])]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_info.link_url,expression:"edit_info.link_url"}],staticClass:"input",domProps:{value:t.edit_info.link_url},on:{input:function(i){i.target.composing||t.$set(t.edit_info,"link_url",i.target.value)}}})])]),e("div",{staticStyle:{height:"20px"}}),e("tr",[e("td",[e("div",{staticClass:"form_table_lable"},[e("i",{staticClass:"el-icon-picture-outline-round form_table_icon"}),e("h4",[t._v(t._s(t.$Text("Icon")))])])]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_info.icon,expression:"edit_info.icon"}],staticClass:"input",domProps:{value:t.edit_info.icon},on:{input:function(i){i.target.composing||t.$set(t.edit_info,"icon",i.target.value)}}})])]),e("tr",[e("td",[e("div",{staticClass:"form_table_lable"},[e("i",{staticClass:"el-icon-price-tag form_table_icon"}),e("h4",[t._v(t._s(t.$Text("Title")))])])]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_info.title,expression:"edit_info.title"}],staticClass:"input",domProps:{value:t.edit_info.title},on:{input:function(i){i.target.composing||t.$set(t.edit_info,"title",i.target.value)}}})])]),e("tr",[e("td",[e("div",{staticClass:"form_table_lable"},[e("i",{staticClass:"el-icon-edit form_table_icon"}),e("h4",[t._v(t._s(t.$Text("Descr")))])])]),e("td",[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit_info.descr,expression:"edit_info.descr"}],staticClass:"input textarea",domProps:{value:t.edit_info.descr},on:{input:function(i){i.target.composing||t.$set(t.edit_info,"descr",i.target.value)}}})])]),e("div",{staticStyle:{height:"20px"}}),e("tr",[e("td",[e("div",{staticClass:"form_table_lable"},[e("h4",[t._v(t._s(t.$Text("Class ID")))])])]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_info.class_id,expression:"edit_info.class_id"}],staticClass:"input",domProps:{value:t.edit_info.class_id},on:{input:function(i){i.target.composing||t.$set(t.edit_info,"class_id",i.target.value)}}})])]),e("tr",[e("td",[e("div",{staticClass:"form_table_lable"},[e("h4",[t._v(t._s(t.$Text("Weight")))])])]),e("td",[e("FormNum",{attrs:{title:t.$Text("Weight"),min:-100,max:100},model:{value:t.edit_info.weight,callback:function(i){t.$set(t.edit_info,"weight",i)},expression:"edit_info.weight"}})],1)])]),e("div",{staticStyle:{height:"20px"}}),e("ButtonI",{attrs:{icon:"submit"},nativeOn:{click:function(i){return t.edit_action()}}},[t._v(t._s(t.$Text("Submit")))]),e("div",{staticStyle:{height:"20px"}}),t.editing_link&&"0"==t.editing_link.disabled?e("ButtonI",{attrs:{icon:"cancel",type:"danger"},nativeOn:{click:function(i){return t.disable_action(1)}}},[t._v(t._s(t.$Text("Disable")))]):t._e(),t.editing_link&&"1"==t.editing_link.disabled?e("ButtonI",{attrs:{icon:"confirm"},nativeOn:{click:function(i){return t.disable_action(0)}}},[t._v(t._s(t.$Text("Enable")))]):t._e(),e("div",{staticStyle:{height:"20px"}}),e("ButtonI",{attrs:{icon:"cancel",type:"danger"},nativeOn:{click:function(i){t.open_delete_confirm_dialog=!0}}},[t._v(t._s(t.$Text("Delete")))]),e("Dialog",{attrs:{open:t.open_delete_confirm_dialog,hide_close:"true"},on:{close:function(i){t.open_delete_confirm_dialog=!1}}},[e("div",{staticClass:"confirm_dialog"},[e("p",{staticClass:"confirm_dialog_title"},[t._v("是否确认删除")]),e("div",{staticClass:"confirm_dialog_button_container"},[e("ButtonI",{attrs:{type:"danger",icon:"confirm"},nativeOn:{click:function(i){return t.delete_action()}}},[t._v(t._s(t.$App.text.Confirm))]),e("ButtonI",{attrs:{type:"plain",icon:"cancel"},nativeOn:{click:function(i){t.open_delete_confirm_dialog=!1}}},[t._v(t._s(t.$App.text.Cancel))])],1)])])],1)])],1)},s=[],a=(e("d3b7"),e("3ca3"),e("ddb0"),{components:{LinkItem:function(){return e.e("chunk-646f645e").then(e.bind(null,"e57a"))},FormSwitch:function(){return e.e("chunk-396af39a").then(e.bind(null,"3488"))},FormNum:function(){return e.e("chunk-691eda62").then(e.bind(null,"fe8f"))},ButtonI:function(){return e.e("chunk-753cb75b").then(e.bind(null,"1e80"))},Dialog:function(){return e.e("chunk-06d74022").then(e.bind(null,"8b5f"))}},props:["class_id","page"],data:function(){return{links:null,editing_link:null,open_edit_dialog:!1,open_delete_confirm_dialog:!1,edit_info:{link_no:null,title:"",icon:"",descr:"",link_url:"",class_id:"",weight:""}}},computed:{editing:function(){return this.$Settings.settings.active_admin&&this.$Account.login_info&&"admin"==this.$Account.login_info.user.utype}},mounted:function(){this.get_links()},methods:{get_links:function(){var t=this;this.$axios.get("links/get_links.php",{params:{class_id:this.class_id,page:this.page||1}}).then((function(i){var e=i.data;"success"==e.status?t.links=e.data:(t.links=null,t.$message({message:e.message||e,status:"error"}))}))},edit_event:function(t){this.open_edit_dialog=!0,this.edit_info.link_no=t.link_no,this.edit_info.icon=t.icon,this.edit_info.title=t.title,this.edit_info.descr=t.descr,this.edit_info.link_url=t.link_url,this.edit_info.class_id=t.class_id,this.edit_info.weight=t.weight,this.editing_link=t},edit_action:function(){var t=this,i=new FormData;i.append("tokenid",this.$Account.tokenid),i.append("link_no",this.edit_info.link_no),i.append("icon",this.edit_info.icon||""),i.append("title",this.edit_info.title||""),i.append("descr",this.edit_info.descr||""),i.append("link_url",this.edit_info.link_url||""),i.append("class_id",this.edit_info.class_id||""),i.append("weight",this.edit_info.weight||""),this.$axios.post("links/edit_link.php",i).then((function(i){var e=i.data;"success"==e.status?(t.$message({message:"编辑成功",status:"success"}),t.open_edit_dialog=!1,t.get_links()):t.$message({message:e.message||e,status:"error"})}))},delete_action:function(){var t=this,i=new FormData;i.append("tokenid",this.$Account.tokenid),i.append("link_no",this.edit_info.link_no),this.$axios.post("links/delete_link.php",i).then((function(i){var e=i.data;"success"==e.status?(t.$message({message:"删除成功",status:"success"}),t.get_links(),t.open_delete_confirm_dialog=!1,t.$nextTick((function(){t.open_edit_dialog=!1}))):t.$message({message:e.message||e,status:"error"})}))},disable_action:function(t){var i=this,e=new FormData;e.append("tokenid",this.$Account.tokenid),e.append("link_no",this.edit_info.link_no),e.append("disabled",t),this.$axios.post("links/disable_link.php",e).then((function(t){var e=t.data;"success"==e.status?(i.$message({message:"禁用/启用成功",status:"success"}),i.get_links(),i.open_delete_confirm_dialog=!1,i.$nextTick((function(){i.open_edit_dialog=!1}))):i.$message({message:e.message||e,status:"error"})}))},new_link_action:function(){var t=this,i=new FormData;i.append("tokenid",this.$Account.tokenid),i.append("class_id",this.class_id),this.$axios.post("links/new_link.php",i).then((function(i){var e=i.data;"success"==e.status?(t.$message({message:"添加成功",status:"success"}),t.get_links()):t.$message({message:e.message||e,status:"error"})}))}}}),o=a,l=(e("5439"),e("2877")),d=Object(l["a"])(o,n,s,!1,null,null,null);i["default"]=d.exports},5439:function(t,i,e){"use strict";e("95ea")},"95ea":function(t,i,e){}}]);